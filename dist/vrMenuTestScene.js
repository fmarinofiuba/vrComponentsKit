var y=Object.defineProperty;var L=(o,n,t)=>n in o?y(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var w=(o,n,t)=>L(o,typeof n!="symbol"?n+"":n,t);import{t as p,D as M,A as x,u as C,n as E,M as h,a as v,b as f,o as T,G as b,C as P,v as R,l as O,w as G,x as H}from"./VRButton.js";import{E as g}from"./ControllersManager.js";import{V as S}from"./VrInteractivePanel.js";class z extends S{constructor(t,e,i){super(t,e,i);w(this,"_vrUI");this.options.mode=="swatch"?(this._container.position.set(-.03,.1,-.14),this._container.scale.set(.35,.35,.35),this._container.rotation.order="YXZ",this._container.rotation.y=p.degToRad(90),this._container.rotation.x=p.degToRad(-10),this._container.rotation.z=p.degToRad(-45)):(this._container.position.set(0,.5,-1),this._container.scale.set(1,1,1)),this._container.visible=!1,this._setupEventListeners()}setVisible(t){this._container.visible=t,t&&this.options.mode=="panel"&&this._repositionPanel()}_updateAspectRatio(t,e,i){const s=t/i,a=i/e,r=1-a;this._map.offset.set(0,r),this._map.repeat.set(1,a),this._mesh.scale.y=1/s,this._mesh.position.y=this._mesh.scale.y/2,this._mapYOffset=r,this._mapYScale=a}_repositionPanel(){const{position:t,viewDirection:e}=this._controllersManager.getHeadsetTransform();e.y=0,e.normalize(),e.multiplyScalar(this.options.panel.distance),t.y+=this.options.panel.verticalOffset,t.add(e),this._container.position.copy(t),this._container.rotation.order="ZYX",this._container.rotation.y=-Math.atan2(e.z,e.x)-Math.PI/2,this._container.rotation.x=-p.degToRad(this.options.panel.inclination)}_setupEventListeners(){this._controllersManager.addEventListener(g.ON_LEFT_CONTROLLER_CONNECTED,this._onLeftControllerConnected.bind(this)),this._controllersManager.addEventListener(g.ON_LEFT_CONTROLLER_DISCONNECTED,this._onLeftControllerDisconnected.bind(this))}_onLeftControllerConnected(t){var e,i;if(this.options.mode=="swatch"){let s=(i=(e=this._controllersManager)==null?void 0:e.left)==null?void 0:i.getGrip();s&&s.add(this._container)}else this._worldContainer.add(this._container)}_onLeftControllerDisconnected(t){var i,s;let e=t.handedness=="left"?this._leftHitMarker:this._rightHitMarker;if(e.visible=!1,this._lastRayStartedHand==t.handedness&&(this._onPointerEvent(this._createPointerEvent("pointerupoutside")),this._lastRayStartedHand=null),this.options.mode=="swatch"){let a=(s=(i=this._controllersManager)==null?void 0:i.left)==null?void 0:s.getGrip();a&&a.remove(this._container)}else this._worldContainer.remove(this._container)}get ui(){throw Error("Should be implemented in a subclass")}}const A=o=>{let n=new M(16777215,.3);n.position.set(1,1,1).normalize(),o.add(n),o.add(new x(16777215,.2));let t=new C(50,32,16),e=new E({color:16777215,wireframe:!0,opacity:.5,transparent:!0});const i=new h(t,e);o.add(i);let s=new h(new v(300,300,20,20).rotateX(-Math.PI/2),new f({color:8421504}));o.add(s);const a=new T(1);o.add(a);const r=new b(10,10,255,8421504);r.material.opacity=.5,r.material.transparent=!0,o.add(r);let d=new h(new P(.3,.3,.5,16),new f({color:214748364}));d.position.set(-1,.25,-3),o.add(d);let _=new h(new R(.2,.05,100,16),new f({color:16750848}));_.position.set(0,2,0);let m=d.clone();m.position.set(1,.25,-3),o.add(m),t=new O(.5,.5,.5),e=new f({color:16711680,shininess:32});const l=new h(t,e);l.position.set(0,2,0),l.rotateX(Math.PI/4),l.rotateZ(Math.PI/3),o.add(l),d.add(_),m.add(l);const c=new G(16777215,2);c.position.set(0,1,-2),o.add(c);const u=new H(c,.1);return o.add(u),{torus:_,cube:l,pointLight:c,floor:s}};export{z as V,A as c};
//# sourceMappingURL=vrMenuTestScene.js.map
